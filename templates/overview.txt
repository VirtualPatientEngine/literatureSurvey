<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
</head>

<body>
  <p>
  <i>This page was last updated on {{current_time}} UTC</i>
  </p>

  <p>
    The <strong>Overview</strong> tab provides a summary of all 
    sub-topics covered in the tabs, serving as a convenient starting 
    point for seeking a general understanding or quick reference 
    before delving into specific details within individual tabs.
  </p>

  <p>
  <h3>Table of Contents</h3>
    <a href="#search_query">1. Search Query</a><br>
    <a href="#plot1">2. Number of articles and citations over time</a><br>
    <a href="#most_cited_articles">3. Most cited articles</a><br>
    <a href="#latest_articles">4. Latest articles</a><br>
    <a href="#plot2">5. Comparison metrics</a><br>
  </p>

  <p>
  <h3 id="search_query">1. Search query</h3>
  <i>{{query}}</i>
  </p>
  
  <p>
  <h3 id="plot1">2. Number of articles and citations over time</h3>
    <div id='myDiv1'>
      <!-- Plotly chart will be drawn inside this DIV -->
    </div>
  </p>

  <p>
  <h3 id="most_cited_articles">3. Most cited articles</h3>
  <table id="table1" class="display" style="width:100%">
  <thead>
    <tr>
        <th>Title</th>
        <th>Authors</th>
        <th>Puation Date</th>
        <th>Journal/Conference</th>
        <th>Citation count</th>
    </tr>
  </thead>
  <tbody>
    {% for article in most_cited_articles %}
      <tr>
        <td><a href="{{article.url}}">{{article.title}}</a><br></td>
        <td>{{ article.authors}}</td>
        <td>{{ article.puationDate}}</td>
        <td>{{ article.journal}}</td>
        <td>{{ article.citationCount}}</td>
      </tr>
    {% endfor %}
  </tbody>
  </table>
  </p>

  <p>
  <h3 id="latest_articles">4. Latest articles</h3>
  <table id="table2" class="display" style="width:100%">
  <thead>
    <tr>
        <th>Title</th>
        <th>Authors</th>
        <th>Puation Date</th>
        <th>Journal/Conference</th>
        <th>Citation count</th>
    </tr>
  </thead>
  <tbody>
    {% for article in most_recent_articles %}
      <tr>
        <td><a href="{{article.url}}">{{article.title}}</a><br></td>
        <td>{{ article.authors}}</td>
        <td>{{ article.puationDate}}</td>
        <td>{{ article.journal}}</td>
        <td>{{ article.citationCount}}</td>
      </tr>
    {% endfor %}
  </tbody>
  </table>
  </p>

  <p>
  <h3 id="plot2">5. Comparison metrics</h3>
    <div id='myDiv2'>
      <!-- Plotly chart will be drawn inside this DIV -->
    </div>
  </p>


</body>

<script>
  var trace1 = {
  x: {{x_year}},
  y: {{y_num_articles}},
  name: 'Num of articles',
  type: 'scatter'
  };

  var trace2 = {
    x: {{x_year}},
    y: {{y_num_citations}},
    name: 'Num of citations',
    yaxis: 'y2',
    type: 'scatter'
  };

  var data = [trace1, trace2];

  var layout = {
    yaxis: {title: 'Num of articles'},
    yaxis2: {
      title: 'Num of citations',
      overlaying: 'y',
      side: 'right'
      }
  };
  Plotly.newPlot('myDiv1', data, layout);
</script>

<script>
    var data = [
    {
      y: {{categories}},
      x: {{num_citations_across_categories}},
      type: 'bar',
      orientation: 'h'
      }
    ];

    var layout = {
    xaxis: {title: 'Num of citations'},
    yaxis: {title: 'Topics', automargin: true},
    
  };

    Plotly.newPlot('myDiv2', data, layout);

</script>
</html>